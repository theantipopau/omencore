<UserControl x:Class="OmenCore.Views.TuningView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:OmenCore.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="1200" d:DesignWidth="1000">
    
    <UserControl.Resources>
        <!-- MSI Afterburner-inspired Slider Style -->
        <Style x:Key="TuningSlider" TargetType="Slider">
            <Setter Property="Background" Value="#1A1A2E"/>
            <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <!-- Track Background with gradient -->
                            <Border Background="#0D0D15" CornerRadius="4" Height="8" 
                                    VerticalAlignment="Center" Margin="8,0"/>
                            
                            <!-- Filled portion (progress track) -->
                            <Border Background="{TemplateBinding Foreground}" CornerRadius="4" Height="8"
                                    VerticalAlignment="Center" Margin="8,0"
                                    HorizontalAlignment="Left"
                                    Width="{Binding RelativeSource={RelativeSource TemplatedParent}, 
                                            Path=Value, 
                                            Converter={StaticResource SliderValueToWidthConverter}}">
                                <Border.OpacityMask>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="0.98"/>
                                        <GradientStop Color="#00FFFFFF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.OpacityMask>
                            </Border>
                            
                            <!-- Track with thumb -->
                            <Track x:Name="PART_Track">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource SliderButtonStyle}" Command="Slider.DecreaseLarge"/>
                                </Track.DecreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Style>
                                            <Style TargetType="Thumb">
                                                <Setter Property="Width" Value="18"/>
                                                <Setter Property="Height" Value="18"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Grid>
                                                                <!-- Glow effect -->
                                                                <Ellipse Fill="{StaticResource AccentBrush}" Opacity="0.3"
                                                                         Width="24" Height="24" Margin="-3"/>
                                                                <!-- Main thumb -->
                                                                <Ellipse Fill="{StaticResource AccentBrush}" 
                                                                         Stroke="#40FFFFFF" StrokeThickness="2"/>
                                                                <!-- Inner highlight -->
                                                                <Ellipse Fill="White" Width="6" Height="6"
                                                                         HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Thumb.Style>
                                    </Thumb>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource SliderButtonStyle}" Command="Slider.IncreaseLarge"/>
                                </Track.IncreaseRepeatButton>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Gauge Arc Path for monitoring displays -->
        <Style x:Key="GaugeValue" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource MonospaceFontFamily}"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
        
        <Style x:Key="GaugeLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>
    
    <ScrollViewer Style="{StaticResource SmoothScrollViewer}" 
                  Padding="0,0,12,0">
        <StackPanel Margin="20,20,20,40">
            <!-- Header with Icon -->
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Background="#1A1A2E" CornerRadius="12" 
                        Padding="14" Margin="0,0,16,0">
                    <Path Data="{StaticResource IconTune}" Fill="{StaticResource AccentBrush}" 
                          Width="28" Height="28" Stretch="Uniform"/>
                </Border>
                
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="CPU / GPU Tuning" Style="{StaticResource Heading1}" Margin="0"/>
                    <TextBlock Text="Advanced performance tuning â€¢ Undervolt â€¢ Overclock â€¢ Power Limits" 
                               Style="{StaticResource Caption}" Opacity="0.9"/>
                </StackPanel>
            </Grid>

            <!-- Warning Banner - Compact -->
            <Border Background="#1A0F0F"
                    BorderBrush="#44F44336"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="14"
                    Margin="0,0,0,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Path Data="{StaticResource IconWarning}" Fill="#F44336" 
                          Width="20" Height="20" Stretch="Uniform" Margin="0,0,12,0"
                          VerticalAlignment="Top"/>
                    <TextBlock Grid.Column="1" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap">
                        <Run Text="ADVANCED TUNING" FontWeight="Bold" Foreground="#F44336"/>
                        <Run Text=" â€” Improper values may cause crashes or freezes. Start small, test stability. Settings reset on reboot unless auto-apply is enabled."/>
                    </TextBlock>
                </Grid>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- CPU SECTION -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            
            <TextBlock Text="CPU Tuning" FontSize="18" FontWeight="SemiBold" 
                       Foreground="{StaticResource AccentBrush}" Margin="0,0,0,16"/>

            <!-- CPU Undervolt Section - Enhanced Design -->
            <Border Style="{StaticResource SurfaceCard}" Padding="0" Margin="0,0,0,16"
                    Visibility="{Binding SystemControl.IsUndervoltSupported, Converter={StaticResource BoolToVisibility}, FallbackValue=Visible}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- CPU Header Bar with Live Stats -->
                    <Border Grid.Row="0" Background="#0A0A12" Padding="20,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- CPU Vendor Logo -->
                            <Border Grid.Column="0" Background="#12121A" CornerRadius="8" 
                                    Padding="10" Margin="0,0,16,0" VerticalAlignment="Center">
                                <Image Width="32" Height="32">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property="Source" Value="pack://application:,,,/Assets/intel.png"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SystemControl.CpuVendor}" Value="AMD">
                                                    <Setter Property="Source" Value="pack://application:,,,/Assets/amd.png"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Border>
                            
                            <!-- Title and Status -->
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="CPU Undervolt (Voltage Offset)" FontSize="16" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                                <TextBlock Text="{Binding SystemControl.CpuDisplayName}" 
                                           FontSize="11" Foreground="{StaticResource TextMutedBrush}"
                                           Margin="0,2,0,0" TextTrimming="CharacterEllipsis"/>
                                <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                    <TextBlock Text="Status: " FontSize="10" Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="{Binding SystemControl.UndervoltStatusText}" 
                                               FontSize="10" FontWeight="SemiBold"
                                               Foreground="{Binding SystemControl.UndervoltStatusColor}"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- Live CPU Stats -->
                            <Border Grid.Column="2" Background="#08080C" CornerRadius="8" Padding="16,10">
                                <StackPanel Orientation="Horizontal">
                                    <!-- Temperature -->
                                    <StackPanel Margin="0,0,20,0" HorizontalAlignment="Center">
                                        <Grid Width="50" Height="50">
                                            <Ellipse Stroke="#1A1A2E" StrokeThickness="4" Fill="Transparent"/>
                                            <Ellipse Stroke="{Binding LatestMonitoringSample.CpuTemperatureC, Converter={StaticResource TemperatureToColorConverter}, FallbackValue=#45C7FF}" 
                                                     StrokeThickness="4" Fill="Transparent" Opacity="0.8"
                                                     StrokeDashArray="3.14 10"/>
                                            <TextBlock Text="{Binding LatestMonitoringSample.CpuTemperatureC, StringFormat={}{0:F0}Â°}"
                                                       FontFamily="{StaticResource MonospaceFontFamily}"
                                                       FontSize="14" FontWeight="Bold"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Grid>
                                        <TextBlock Text="TEMP" FontSize="9" Foreground="{StaticResource TextMutedBrush}" 
                                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    
                                    <!-- Power Draw -->
                                    <StackPanel HorizontalAlignment="Center">
                                        <Grid Width="50" Height="50">
                                            <Ellipse Stroke="#1A1A2E" StrokeThickness="4" Fill="Transparent"/>
                                            <Ellipse Stroke="#FF9800" StrokeThickness="4" Fill="Transparent" Opacity="0.6"
                                                     StrokeDashArray="2.5 10"/>
                                            <TextBlock Text="{Binding LatestMonitoringSample.CpuPowerWatts, StringFormat={}{0:F0}W}"
                                                       FontFamily="{StaticResource MonospaceFontFamily}"
                                                       FontSize="14" FontWeight="Bold"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Grid>
                                        <TextBlock Text="POWER" FontSize="9" Foreground="{StaticResource TextMutedBrush}" 
                                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- Controls -->
                    <StackPanel Grid.Row="1" Margin="24">
                        <TextBlock Text="Reduce CPU voltage to lower temperatures while maintaining performance. More negative = more undervolt." 
                                   FontSize="12"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,0,0,20" TextWrapping="Wrap"/>

                        <!-- Core Voltage Offset - Enhanced Slider -->
                        <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="80"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock Text="CORE OFFSET" FontSize="10" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="Voltage" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                </StackPanel>
                                
                                <Slider Grid.Column="1" 
                                        Value="{Binding SystemControl.RequestedCoreOffset, Mode=TwoWay}"
                                        Minimum="-200" Maximum="0"
                                        TickFrequency="5"
                                        IsSnapToTickEnabled="True"
                                        VerticalAlignment="Center"
                                        Margin="16,0"/>
                                
                                <Border Grid.Column="2" Background="#12121A" CornerRadius="4" 
                                        Padding="8,4" HorizontalAlignment="Right">
                                    <TextBlock Text="{Binding SystemControl.RequestedCoreOffset, StringFormat={}{0} mV}"
                                               FontFamily="{StaticResource MonospaceFontFamily}"
                                               FontSize="14" FontWeight="Bold"
                                               Foreground="{StaticResource AccentBrush}"
                                               HorizontalAlignment="Center"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Cache Voltage Offset - Enhanced Slider -->
                        <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="80"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock Text="CACHE OFFSET" FontSize="10" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="L3 Cache" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                </StackPanel>
                                
                                <Slider Grid.Column="1" 
                                        Value="{Binding SystemControl.RequestedCacheOffset, Mode=TwoWay}"
                                        Minimum="-200" Maximum="0"
                                        TickFrequency="5"
                                        IsSnapToTickEnabled="True"
                                        VerticalAlignment="Center"
                                        Margin="16,0"/>
                                
                                <Border Grid.Column="2" Background="#12121A" CornerRadius="4" 
                                        Padding="8,4" HorizontalAlignment="Right">
                                    <TextBlock Text="{Binding SystemControl.RequestedCacheOffset, StringFormat={}{0} mV}"
                                               FontFamily="{StaticResource MonospaceFontFamily}"
                                               FontSize="14" FontWeight="Bold"
                                               Foreground="{StaticResource AccentBlueBrush}"
                                               HorizontalAlignment="Center"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Apply Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Apply Undervolt" 
                                    Style="{StaticResource ModernButton}"
                                    Command="{Binding SystemControl.ApplyUndervoltCommand}"
                                    Padding="16,8" Margin="0,0,8,0"/>
                            
                            <Button Content="Reset to 0mV" 
                                    Style="{StaticResource SecondaryButton}"
                                    Command="{Binding SystemControl.ResetUndervoltCommand}"
                                    Padding="16,8"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- CPU Power Limits (PL1/PL2) Section - Enhanced Design -->
            <Border Style="{StaticResource SurfaceCard}" Padding="0" Margin="0,0,0,16"
                    Visibility="{Binding SystemControl.CpuPowerLimitsAvailable, Converter={StaticResource BooleanToVisibilityConverter}}"
                    ToolTip="Adjust CPU sustained (PL1) and burst (PL2) power limits. Higher values = more performance but more heat.">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header -->
                    <Border Grid.Row="0" Background="#0A0A12" Padding="20,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0" Background="#12121A" CornerRadius="8" 
                                    Padding="10" Margin="0,0,16,0" VerticalAlignment="Center">
                                <Image Width="32" Height="32">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property="Source" Value="pack://application:,,,/Assets/intel.png"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SystemControl.CpuVendor}" Value="AMD">
                                                    <Setter Property="Source" Value="pack://application:,,,/Assets/amd.png"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Border>
                            
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="CPU Power Limits (PL1/PL2)" FontSize="16" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                                <TextBlock Text="{Binding SystemControl.CpuPowerLimitsStatus}" 
                                           FontSize="11" Foreground="{StaticResource AccentBrush}"
                                           Margin="0,4,0,0" TextTrimming="CharacterEllipsis"/>
                            </StackPanel>
                            
                            <Button Grid.Column="2" Content="ðŸ”„ Refresh"
                                    Style="{StaticResource SecondaryButton}"
                                    Command="{Binding SystemControl.RefreshCpuPowerLimitsCommand}"
                                    Padding="12,6" FontSize="11"/>
                        </Grid>
                    </Border>
                    
                    <StackPanel Grid.Row="1" Margin="24">
                        
                        <!-- Info Box -->
                        <Border Background="#0D1520"
                                BorderBrush="#2196F3"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="12"
                                Margin="0,0,0,20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path Data="{StaticResource IconAbout}" Fill="#2196F3" 
                                      Width="16" Height="16" Stretch="Uniform" 
                                      Margin="0,0,10,0" VerticalAlignment="Top"/>
                                <TextBlock Grid.Column="1" FontSize="11" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap">
                                    <Run Text="PL1" FontWeight="SemiBold" Foreground="#64B5F6"/> <Run Text="= Sustained TDP â€¢"/>
                                    <Run Text="PL2" FontWeight="SemiBold" Foreground="#64B5F6"/> <Run Text="= Burst power for turbo â€¢ Higher = more performance &amp; heat"/>
                                </TextBlock>
                            </Grid>
                        </Border>

                        <!-- PL1 (Sustained) Slider - Enhanced -->
                        <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock Text="PL1 SUSTAINED" FontSize="10" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="Long-term TDP" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                </StackPanel>
                                
                                <Slider Grid.Column="1" 
                                        Minimum="{Binding SystemControl.CpuPl1Min}" 
                                        Maximum="{Binding SystemControl.CpuPl1Max}" 
                                        TickFrequency="5" 
                                        Value="{Binding SystemControl.CpuPl1Watts, Mode=TwoWay}"
                                        IsSnapToTickEnabled="True"
                                        IsEnabled="{Binding SystemControl.CpuPowerLimitsLocked, Converter={StaticResource InverseBooleanConverter}}"
                                        VerticalAlignment="Center"
                                        Margin="16,0"/>
                                
                                <StackPanel Grid.Column="2" HorizontalAlignment="Right">
                                    <Border Background="#12121A" CornerRadius="4" Padding="8,4">
                                        <TextBlock Text="{Binding SystemControl.CpuPl1Text}"
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="14" FontWeight="Bold"
                                                   Foreground="#FF9800"
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                    <TextBlock Text="{Binding SystemControl.CurrentPl1Text}" 
                                               FontSize="9" Foreground="{StaticResource TextMutedBrush}"
                                               HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- PL2 (Burst) Slider - Enhanced -->
                        <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock Text="PL2 BURST" FontSize="10" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="Turbo Power" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                </StackPanel>
                                
                                <Slider Grid.Column="1" 
                                        Minimum="{Binding SystemControl.CpuPl2Min}" 
                                        Maximum="{Binding SystemControl.CpuPl2Max}" 
                                        TickFrequency="5" 
                                        Value="{Binding SystemControl.CpuPl2Watts, Mode=TwoWay}"
                                        IsSnapToTickEnabled="True"
                                        IsEnabled="{Binding SystemControl.CpuPowerLimitsLocked, Converter={StaticResource InverseBooleanConverter}}"
                                        VerticalAlignment="Center"
                                        Margin="16,0"/>
                                
                                <StackPanel Grid.Column="2" HorizontalAlignment="Right">
                                    <Border Background="#12121A" CornerRadius="4" Padding="8,4">
                                        <TextBlock Text="{Binding SystemControl.CpuPl2Text}"
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="14" FontWeight="Bold"
                                                   Foreground="{StaticResource AccentBrush}"
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                    <TextBlock Text="{Binding SystemControl.CurrentPl2Text}" 
                                               FontSize="9" Foreground="{StaticResource TextMutedBrush}"
                                               HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- Locked Warning -->
                        <Border Background="#1A0F0F"
                                BorderBrush="#44F44336"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="12"
                                Margin="0,0,0,16"
                                Visibility="{Binding SystemControl.CpuPowerLimitsLocked, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="ðŸ”’" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" FontSize="11" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap">
                                    <Run Text="Power limits locked by BIOS" FontWeight="Bold" Foreground="#F44336"/>
                                    <Run Text=" â€” MSR registers are write-locked until reboot. May require BIOS settings or HP Unleashed Mode."/>
                                </TextBlock>
                            </Grid>
                        </Border>

                        <!-- Apply Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Apply Power Limits" 
                                    Style="{StaticResource ModernButton}"
                                    Command="{Binding SystemControl.ApplyCpuPowerLimitsCommand}"
                                    Padding="16,8" Margin="0,0,8,0"
                                    IsEnabled="{Binding SystemControl.CpuPowerLimitsLocked, Converter={StaticResource InverseBooleanConverter}}"/>
                            
                            <Button Content="Reset to Defaults" 
                                    Style="{StaticResource SecondaryButton}"
                                    Command="{Binding SystemControl.ResetCpuPowerLimitsCommand}"
                                    Padding="16,8"
                                    IsEnabled="{Binding SystemControl.CpuPowerLimitsLocked, Converter={StaticResource InverseBooleanConverter}}"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- TCC Offset Section - Enhanced Design -->
            <Border Style="{StaticResource SurfaceCard}" Padding="0" Margin="0,0,0,16"
                    Visibility="{Binding SystemControl.TccStatus.IsSupported, Converter={StaticResource BoolToVisibility}, FallbackValue=Collapsed}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header -->
                    <Border Grid.Row="0" Background="#0A0A12" Padding="20,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0" Background="#12121A" CornerRadius="8" 
                                    Padding="10" Margin="0,0,16,0" VerticalAlignment="Center">
                                <Image Width="32" Height="32">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property="Source" Value="pack://application:,,,/Assets/intel.png"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SystemControl.CpuVendor}" Value="AMD">
                                                    <Setter Property="Source" Value="pack://application:,,,/Assets/amd.png"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Border>
                            
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="TCC Offset (Thermal Throttle Point)" FontSize="16" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                                <TextBlock Text="Reduce CPU Tjmax throttling temperature" 
                                           FontSize="11" Foreground="{StaticResource TextMutedBrush}"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <StackPanel Grid.Row="1" Margin="24">
                        
                        <!-- TCC Slider - Enhanced -->
                        <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="80"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock Text="TCC OFFSET" FontSize="10" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="Â°C reduction" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                </StackPanel>
                                
                                <Slider Grid.Column="1" 
                                        Value="{Binding SystemControl.RequestedTccOffset, Mode=TwoWay}"
                                        Minimum="0" Maximum="30"
                                        TickFrequency="1"
                                        IsSnapToTickEnabled="True"
                                        VerticalAlignment="Center"
                                        Margin="16,0"/>
                                
                                <Border Grid.Column="2" Background="#12121A" CornerRadius="4" 
                                        Padding="8,4" HorizontalAlignment="Right">
                                    <TextBlock Text="{Binding SystemControl.RequestedTccOffset, StringFormat={}{0}Â°C}"
                                               FontFamily="{StaticResource MonospaceFontFamily}"
                                               FontSize="14" FontWeight="Bold"
                                               Foreground="#4CAF50"
                                               HorizontalAlignment="Center"/>
                                </Border>
                            </Grid>
                        </Border>
                        
                        <!-- Reference info -->
                        <TextBlock FontSize="11" Foreground="{StaticResource TextMutedBrush}" Margin="0,0,0,20" TextWrapping="Wrap">
                            <Run Text="0Â°C" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/> <Run Text="= Default (100Â°C Tjmax) â€¢"/>
                            <Run Text="15Â°C" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/> <Run Text="= Throttle at 85Â°C â€¢"/>
                            <Run Text="30Â°C" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/> <Run Text="= Throttle at 70Â°C"/>
                        </TextBlock>

                        <!-- Apply Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Apply Limit" 
                                    Style="{StaticResource ModernButton}"
                                    Command="{Binding SystemControl.ApplyTccOffsetCommand}"
                                    Padding="16,8" Margin="0,0,8,0"/>
                            
                            <Button Content="Remove Limit" 
                                    Style="{StaticResource SecondaryButton}"
                                    Command="{Binding SystemControl.ResetTccOffsetCommand}"
                                    Padding="16,8"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- GPU SECTION -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            
            <TextBlock Text="GPU Tuning" FontSize="18" FontWeight="SemiBold" 
                       Foreground="{StaticResource AccentBrush}" Margin="0,24,0,16"
                       Visibility="{Binding SystemControl.GpuOcSectionVisible, Converter={StaticResource BooleanToVisibilityConverter}}"/>

            <!-- GPU Overclocking Section - MSI Afterburner Inspired -->
            <Border Style="{StaticResource SurfaceCard}" Padding="0" Margin="0,0,0,16"
                    Visibility="{Binding SystemControl.GpuOcSectionVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- GPU Header Bar with Live Stats -->
                    <Border Grid.Row="0" Background="#0A0A12" Padding="20,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- GPU Vendor Logo -->
                            <Border Grid.Column="0" Background="#12121A" CornerRadius="8" 
                                    Padding="10" Margin="0,0,16,0" VerticalAlignment="Center">
                                <Image Width="40" Height="40">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property="Source" Value="pack://application:,,,/Assets/nvidia.png"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SystemControl.GpuVendor}" Value="AMD">
                                                    <Setter Property="Source" Value="pack://application:,,,/Assets/amd.png"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding SystemControl.GpuVendor}" Value="Intel">
                                                    <Setter Property="Source" Value="pack://application:,,,/Assets/intel.png"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Border>
                            
                            <!-- GPU Info -->
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="{Binding SystemControl.GpuDisplayName}" 
                                           FontSize="16" FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                    <TextBlock Text="Driver " FontSize="11" Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="{Binding SystemControl.GpuDriverVersion}" 
                                               FontSize="11" Foreground="{StaticResource AccentBlueBrush}"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- Live Monitoring Stats (MSI Afterburner style) -->
                            <Border Grid.Column="2" Background="#08080C" CornerRadius="8" Padding="16,10">
                                <StackPanel Orientation="Horizontal">
                                    <!-- Temperature Gauge -->
                                    <StackPanel Margin="0,0,20,0" HorizontalAlignment="Center">
                                        <Grid Width="50" Height="50">
                                            <!-- Background ring -->
                                            <Ellipse Stroke="#1A1A2E" StrokeThickness="4" Fill="Transparent"/>
                                            <!-- Colored progress ring (would need converter for actual arc) -->
                                            <Ellipse Stroke="{Binding LatestMonitoringSample.GpuTemperatureC, Converter={StaticResource TemperatureToColorConverter}, FallbackValue=#45C7FF}" 
                                                     StrokeThickness="4" Fill="Transparent" Opacity="0.8"
                                                     StrokeDashArray="3.14 10"/>
                                            <!-- Temperature value -->
                                            <TextBlock Text="{Binding LatestMonitoringSample.GpuTemperatureC, StringFormat={}{0:F0}Â°}"
                                                       FontFamily="{StaticResource MonospaceFontFamily}"
                                                       FontSize="14" FontWeight="Bold"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Grid>
                                        <TextBlock Text="TEMP" FontSize="9" Foreground="{StaticResource TextMutedBrush}" 
                                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    
                                    <!-- Power Draw -->
                                    <StackPanel Margin="0,0,20,0" HorizontalAlignment="Center">
                                        <Grid Width="50" Height="50">
                                            <Ellipse Stroke="#1A1A2E" StrokeThickness="4" Fill="Transparent"/>
                                            <Ellipse Stroke="#FF9800" StrokeThickness="4" Fill="Transparent" Opacity="0.6"
                                                     StrokeDashArray="2.5 10"/>
                                            <TextBlock Text="{Binding LatestMonitoringSample.GpuPowerWatts, StringFormat={}{0:F0}W}"
                                                       FontFamily="{StaticResource MonospaceFontFamily}"
                                                       FontSize="14" FontWeight="Bold"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Grid>
                                        <TextBlock Text="POWER" FontSize="9" Foreground="{StaticResource TextMutedBrush}" 
                                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    
                                    <!-- GPU Clock -->
                                    <StackPanel HorizontalAlignment="Center">
                                        <Grid Width="50" Height="50">
                                            <Ellipse Stroke="#1A1A2E" StrokeThickness="4" Fill="Transparent"/>
                                            <Ellipse Stroke="{StaticResource AccentBrush}" StrokeThickness="4" Fill="Transparent" Opacity="0.6"
                                                     StrokeDashArray="2 10"/>
                                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                                <TextBlock Text="{Binding LatestMonitoringSample.GpuClockMhz, StringFormat={}{0:F0}}"
                                                           FontFamily="{StaticResource MonospaceFontFamily}"
                                                           FontSize="12" FontWeight="Bold"
                                                           Foreground="{StaticResource TextPrimaryBrush}"
                                                           HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Grid>
                                        <TextBlock Text="CLOCK" FontSize="9" Foreground="{StaticResource TextMutedBrush}" 
                                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- Controls Section -->
                    <StackPanel Grid.Row="1" Margin="24">
                        
                        <!-- GPU "Undervolt" Info Box -->
                        <Border Background="#0D1520"
                                BorderBrush="#2196F3"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="14"
                                Margin="0,0,0,20"
                                Visibility="{Binding SystemControl.GpuNvapiAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path Data="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" 
                                      Fill="#2196F3" Width="18" Height="18" Stretch="Uniform" 
                                      Margin="0,0,12,0" VerticalAlignment="Top"/>
                                <TextBlock Grid.Column="1" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap">
                                    <Run Text="GPU UNDERVOLTING:" FontWeight="Bold" Foreground="#64B5F6"/>
                                    <Run Text=" Modern NVIDIA GPUs auto-manage voltage. To reduce power/heat: lower the"/>
                                    <Run Text=" Power Limit" FontWeight="SemiBold" Foreground="{StaticResource AccentBrush}"/>
                                    <Run Text=" (forces lower voltage at each frequency) or use"/>
                                    <Run Text=" negative Core Offset" FontWeight="SemiBold" Foreground="{StaticResource AccentBrush}"/>
                                    <Run Text=" (reduces boost clocks â†’ less voltage needed). For V/F curve editing, use MSI Afterburner."/>
                                </TextBlock>
                            </Grid>
                        </Border>
                        
                        <!-- Active OC Display - Prominent status bar -->
                        <Border Background="#0A0A12" 
                                CornerRadius="8" Padding="16" Margin="0,0,0,20"
                                Visibility="{Binding SystemControl.GpuNvapiAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <Border Grid.Column="0" Background="{StaticResource AccentBrush}" 
                                        CornerRadius="4" Padding="10,5" Margin="0,0,16,0"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="ACTIVE" FontSize="10" FontWeight="Bold" 
                                               Foreground="White" FontFamily="{StaticResource MonospaceFontFamily}"/>
                                </Border>
                                
                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                    <StackPanel Margin="0,0,24,0">
                                        <TextBlock Text="CORE" FontSize="9" Foreground="{StaticResource TextMutedBrush}"/>
                                        <TextBlock Text="{Binding SystemControl.GpuCoreClockOffset, StringFormat={}{0:+0;-0;0} MHz}" 
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="{StaticResource AccentBrush}"/>
                                    </StackPanel>
                                    <StackPanel Margin="0,0,24,0">
                                        <TextBlock Text="MEMORY" FontSize="9" Foreground="{StaticResource TextMutedBrush}"/>
                                        <TextBlock Text="{Binding SystemControl.GpuMemoryClockOffset, StringFormat={}{0:+0;-0;0} MHz}" 
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="{StaticResource AccentBlueBrush}"/>
                                    </StackPanel>
                                    <StackPanel>
                                        <TextBlock Text="POWER" FontSize="9" Foreground="{StaticResource TextMutedBrush}"/>
                                        <TextBlock Text="{Binding SystemControl.GpuPowerLimitPercent, StringFormat={}{0}%}" 
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="#4CAF50"/>
                                    </StackPanel>
                                </StackPanel>
                                
                                <TextBlock Grid.Column="2" Text="{Binding SystemControl.GpuOcStatus}" 
                                           FontSize="11" Foreground="{StaticResource TextMutedBrush}"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        
                        <!-- AMD GPU Overclocking Controls (ADL2) -->
                        <StackPanel Visibility="{Binding SystemControl.GpuAmdAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                            
                            <!-- AMD GPU Status -->
                            <Border Background="#1F2D1F"
                                    BorderBrush="#4CAF50"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="12"
                                    Margin="0,0,0,16">
                                <TextBlock FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap">
                                    <Run Text="âœ“ AMD GPU Overclocking (ADL2)" FontWeight="Bold" Foreground="#4CAF50"/>
                                    <LineBreak/>
                                    <Run Text="AMD Radeon GPU overclocking is available via AMD Display Library. Adjust clock offsets and power limits below."/>
                                </TextBlock>
                            </Border>
                            
                            <!-- AMD Core Clock Offset -->
                            <Border Background="{StaticResource SurfaceMediumBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Core Clock Offset (MHz)" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding SystemControl.AmdCoreClockOffset, StringFormat={}{0} MHz}" FontSize="13" Foreground="{StaticResource AccentBrush}" HorizontalAlignment="Right"/>
                                    <Slider Grid.Row="1" Grid.ColumnSpan="2" Minimum="-500" Maximum="500" 
                                            Value="{Binding SystemControl.AmdCoreClockOffset, Mode=TwoWay}" 
                                            TickFrequency="25" IsSnapToTickEnabled="True" Margin="0,8,0,0"/>
                                </Grid>
                            </Border>
                            
                            <!-- AMD Memory Clock Offset -->
                            <Border Background="{StaticResource SurfaceMediumBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Memory Clock Offset (MHz)" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding SystemControl.AmdMemoryClockOffset, StringFormat={}{0} MHz}" FontSize="13" Foreground="{StaticResource AccentBrush}" HorizontalAlignment="Right"/>
                                    <Slider Grid.Row="1" Grid.ColumnSpan="2" Minimum="-500" Maximum="500" 
                                            Value="{Binding SystemControl.AmdMemoryClockOffset, Mode=TwoWay}" 
                                            TickFrequency="25" IsSnapToTickEnabled="True" Margin="0,8,0,0"/>
                                </Grid>
                            </Border>
                            
                            <!-- AMD Power Limit -->
                            <Border Background="{StaticResource SurfaceMediumBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="50"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Power Limit (%)" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding SystemControl.AmdPowerLimitPercent, StringFormat={}{0}%}" FontSize="13" Foreground="{StaticResource AccentBrush}" HorizontalAlignment="Right"/>
                                    <Slider Grid.Row="1" Grid.ColumnSpan="2" Minimum="-50" Maximum="50" 
                                            Value="{Binding SystemControl.AmdPowerLimitPercent, Mode=TwoWay}" 
                                            TickFrequency="5" IsSnapToTickEnabled="True" Margin="0,8,0,0"/>
                                </Grid>
                            </Border>
                            
                            <!-- AMD Apply / Reset Buttons -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,4,0,0">
                                <Button Content="Reset to Default" 
                                        Style="{StaticResource SecondaryButton}"
                                        Command="{Binding SystemControl.ResetAmdGpuCommand}"
                                        Margin="0,0,8,0" Padding="16,8"/>
                                <Button Content="Apply AMD GPU OC" 
                                        Style="{StaticResource ModernButton}"
                                        Command="{Binding SystemControl.ApplyAmdGpuOcCommand}"
                                        Padding="16,8"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- NVIDIA Controls - MSI Afterburner Style -->
                        <StackPanel Visibility="{Binding SystemControl.GpuNvapiAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                            
                            <!-- Clock Offsets Not Available Info Box -->
                            <Border Background="#1F2D3D"
                                    BorderBrush="#2196F3"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="12"
                                    Margin="0,0,0,16"
                                    Visibility="{Binding SystemControl.GpuOcNotAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <TextBlock FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap">
                                    <Run Text="â„¹ï¸ Clock Offsets Not Available" FontWeight="Bold" Foreground="#2196F3"/>
                                    <LineBreak/>
                                    <Run Text="Your GPU doesn't support clock offset adjustments via NVAPI. Power Limit adjustments still work below."/>
                                    <LineBreak/>
                                    <Run Text="For clock OC, use MSI Afterburner or HP Omen Hub."/>
                                </TextBlock>
                            </Border>

                            <!-- Power Limit Slider - MSI Afterburner Style -->
                            <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="80"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                        <TextBlock Text="POWER LIMIT" FontSize="10" FontWeight="SemiBold"
                                                   Foreground="{StaticResource TextMutedBrush}"/>
                                        <TextBlock Text="TDP %" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                    </StackPanel>
                                    
                                    <Slider Grid.Column="1" 
                                            Value="{Binding SystemControl.GpuPowerLimitPercent, Mode=TwoWay}"
                                            Minimum="{Binding SystemControl.GpuPowerLimitMin}"
                                            Maximum="{Binding SystemControl.GpuPowerLimitMax}"
                                            TickFrequency="5"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            Margin="16,0"/>
                                    
                                    <Border Grid.Column="2" Background="#12121A" CornerRadius="4" 
                                            Padding="8,4" HorizontalAlignment="Right">
                                        <TextBlock Text="{Binding SystemControl.GpuPowerLimitPercent, StringFormat={}{0}%}"
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="#4CAF50"
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Core Clock Offset Slider -->
                            <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,12"
                                    Visibility="{Binding SystemControl.GpuOcAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="80"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                        <TextBlock Text="CORE CLOCK" FontSize="10" FontWeight="SemiBold"
                                                   Foreground="{StaticResource TextMutedBrush}"/>
                                        <TextBlock Text="MHz Offset" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                    </StackPanel>
                                    
                                    <Slider Grid.Column="1" 
                                            Value="{Binding SystemControl.GpuCoreClockOffset, Mode=TwoWay}"
                                            Minimum="{Binding SystemControl.GpuCoreOffsetMin}"
                                            Maximum="{Binding SystemControl.GpuCoreOffsetMax}"
                                            TickFrequency="25"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            Margin="16,0"/>
                                    
                                    <Border Grid.Column="2" Background="#12121A" CornerRadius="4" 
                                            Padding="8,4" HorizontalAlignment="Right">
                                        <TextBlock Text="{Binding SystemControl.GpuCoreClockOffset, StringFormat={}{0:+0;-0;0}}"
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="{StaticResource AccentBrush}"
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Memory Clock Offset Slider -->
                            <Border Background="#0A0A12" CornerRadius="8" Padding="16" Margin="0,0,0,20"
                                    Visibility="{Binding SystemControl.GpuOcAvailable, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="80"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                        <TextBlock Text="MEM CLOCK" FontSize="10" FontWeight="SemiBold"
                                                   Foreground="{StaticResource TextMutedBrush}"/>
                                        <TextBlock Text="MHz Offset" FontSize="9" Foreground="{StaticResource TextTertiaryBrush}"/>
                                    </StackPanel>
                                    
                                    <Slider Grid.Column="1" 
                                            Value="{Binding SystemControl.GpuMemoryClockOffset, Mode=TwoWay}"
                                            Minimum="{Binding SystemControl.GpuMemoryOffsetMin}"
                                            Maximum="{Binding SystemControl.GpuMemoryOffsetMax}"
                                            TickFrequency="50"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            Margin="16,0"/>
                                    
                                    <Border Grid.Column="2" Background="#12121A" CornerRadius="4" 
                                            Padding="8,4" HorizontalAlignment="Right">
                                        <TextBlock Text="{Binding SystemControl.GpuMemoryClockOffset, StringFormat={}{0:+0;-0;0}}"
                                                   FontFamily="{StaticResource MonospaceFontFamily}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="{StaticResource AccentBlueBrush}"
                                                   HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Apply Buttons -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="Apply GPU Settings" 
                                        Style="{StaticResource ModernButton}"
                                        Command="{Binding SystemControl.ApplyGpuOcCommand}"
                                        Padding="16,8" Margin="0,0,8,0"/>
                                
                                <Button Content="Reset to Defaults" 
                                        Style="{StaticResource SecondaryButton}"
                                        Command="{Binding SystemControl.ResetGpuOcCommand}"
                                        Padding="16,8"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- No Tuning Available Message -->
            <Border Style="{StaticResource SurfaceCard}" Padding="24" Margin="0,0,0,16"
                    Visibility="{Binding SystemControl.NoTuningAvailable, Converter={StaticResource BoolToVisibility}, FallbackValue=Collapsed}">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ”§" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                    <TextBlock Text="No Tuning Features Available" FontSize="18" FontWeight="SemiBold" 
                               Foreground="{StaticResource TextPrimaryBrush}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Your system doesn't support CPU undervolting, power limit control, or GPU overclocking through OmenCore."
                               FontSize="13" Foreground="{StaticResource TextSecondaryBrush}" 
                               TextWrapping="Wrap" TextAlignment="Center" MaxWidth="500"/>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</UserControl>
